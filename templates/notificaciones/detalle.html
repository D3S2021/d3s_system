{% extends "_base.html" %}
{% block title %}Notificación{% endblock %}

{% block extra_css %}
{{ block.super }}
<style>
  .wrap { max-width: 900px; margin: 0 auto; }
  .head { display:flex; align-items:center; justify-content:space-between; gap:12px; margin:8px 0 10px; }
  .title { margin:0; font-weight:800; letter-spacing:-.02em; }
  .meta { color:#ffffff; }
  .card {
    border:1px solid #e5e7eb; border-radius:12px; background:#fff;
    padding:16px; box-shadow:0 1px 2px rgba(16,24,40,.04);
  }
  .btn { display:inline-flex; align-items:center; gap:6px; padding:8px 12px;
         border:1px solid #d0d7de; border-radius:10px; background:#fff; text-decoration:none; color:#0f172a; }
  .btn:hover { background:#f8fafc; }
  .btn-primary { background:#ffffff; color:#fff; border-color:#000000; }
  .btn-primary:hover { background:#1d4ed8; }
</style>
{% endblock %}

{% block content %}
<div class="wrap">
  <div class="head">
    <h1 class="title">Notificación</h1>
    <a class="btn" href="{% url 'notificaciones:lista' %}">← Volver</a>
  </div>

  <div class="card">
    <h2 style="margin:0 0 6px">{{ n.titulo }}</h2>
    <div class="meta">{{ n.creada|date:"d/m/Y H:i" }}</div>

    <div style="margin-top:10px">
      {% if n.cuerpo %}
        <p style="white-space:pre-line">{{ n.cuerpo }}</p>
      {% else %}
        <p>(Sin contenido)</p>
      {% endif %}
    </div>

    
  </div>
</div>

{% if n.url %}
<script>
  // Si el enlace ya trae querystring, usamos &asModal=1
  (function(){
    const a = document.querySelector('.js-asmodal');
    if(!a) return;
    let href = a.getAttribute('href');
    // Evitar duplicado si ya lo tiene
    if (!/[\?&]asModal=1\b/.test(href)) {
      if(href.includes('?')) href += '&asModal=1';
      else href += '?asModal=1';
      a.setAttribute('href', href);
    }
  })();
</script>
{% endif %}
{% endblock %}
